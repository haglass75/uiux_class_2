<!-- <template>
  <div class="box">
    <h2>ğŸ“¸ ì‚¬ì§„ ë¦¬ë·° ë‚¨ê¸°ê¸°</h2>

    <input v-model="name" placeholder="ì´ë¦„" />
    <input v-model="rating" type="number" min="1" max="5" placeholder="ë³„ì (1~5)" />
    <textarea v-model="text" placeholder="í›„ê¸°ë¥¼ ì…ë ¥í•˜ì„¸ìš”"></textarea>

    <!-- ì‚¬ì§„ ì—…ë¡œë“œ -->
    <input type="file" ref="fileInput" @change="uploadImage" />

    <!-- ë¯¸ë¦¬ë³´ê¸° -->
    <div v-if="preview" class="preview">
      <img :src="preview" alt="ë¯¸ë¦¬ë³´ê¸°" />
    </div>

    <button @click="saveReview">ğŸ’¾ ë¦¬ë·° ì €ì¥í•˜ê¸°</button>

    <hr />

    <h3>ğŸ“ƒ ì €ì¥ëœ ë¦¬ë·°</h3>
    <div v-for="(review, i) in reviews" :key="i" class="review">
      <p>ğŸ‘¤ {{ review.name }}</p>
      <p>â­ {{ review.rating }}</p>
      <p>ğŸ’¬ {{ review.text }}</p>
      <img v-if="review.image" :src="review.image" alt="ë¦¬ë·° ì‚¬ì§„" />
      <button @click="deleteReview(i)">ğŸ—‘ï¸ ì‚­ì œ</button>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted } from "vue";

const name = ref("");
const rating = ref("");
const text = ref("");
const preview = ref("");
const reviews = ref([]);
const fileInput = ref(null); // íŒŒì¼ input ref

// í˜ì´ì§€ ì—´ë¦´ ë•Œ localStorageì—ì„œ ë¶ˆëŸ¬ì˜¤ê¸°
onMounted(() => {
  const saved = localStorage.getItem("reviews");
  if (saved) {
    reviews.value = JSON.parse(saved);
  }
});

// ì‚¬ì§„ ì—…ë¡œë“œ
const uploadImage = (e) => {
  const file = e.target.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.readAsDataURL(file);
  reader.onload = () => {
    preview.value = reader.result;
  };
};

// ë¦¬ë·° ì €ì¥í•˜ê¸°
const saveReview = () => {
  if (!name.value || !rating.value || !text.value) {
    alert("ì´ë¦„, ë³„ì , í›„ê¸°ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”!");
    return;
  }

  const newReview = {
    name: name.value,
    rating: rating.value,
    text: text.value,
    image: preview.value,
  };

  reviews.value.push(newReview);
  localStorage.setItem("reviews", JSON.stringify(reviews.value));

  alert("ì‚¬ì§„ ë¦¬ë·°ê°€ ì €ì¥ëì–´ìš”!");

  // ì…ë ¥ì°½ ì´ˆê¸°í™”
  name.value = "";
  rating.value = "";
  text.value = "";
  preview.value = "";
  fileInput.value.value = ""; // âœ… íŒŒì¼ input ì´ˆê¸°í™”
};

// ë¦¬ë·° ì‚­ì œí•˜ê¸°
const deleteReview = (index) => {
  if (confirm("ì •ë§ ì‚­ì œí• ê¹Œìš”?")) {
    reviews.value.splice(index, 1);
    localStorage.setItem("reviews", JSON.stringify(reviews.value));
  }
};
</script>

<style scoped>
.box {
  width: 330px;
  margin: 40px auto;
  padding: 20px;
  background: #eef6ff;
  border-radius: 12px;
}
input,
textarea {
  width: 100%;
  margin-bottom: 8px;
  padding: 6px;
  border-radius: 6px;
  border: 1px solid #ccc;
}
button {
  width: 100%;
  background: #0a66c2;
  color: white;
  border: none;
  padding: 8px;
  border-radius: 8px;
  cursor: pointer;
  margin-top: 5px;
}
button:hover {
  background: #004a99;
}
.preview img {
  width: 100%;
  border-radius: 8px;
  margin-top: 8px;
}
.review {
  background: white;
  border-radius: 8px;
  padding: 10px;
  margin-top: 10px;
}
.review img {
  width: 100%;
  border-radius: 8px;
  margin-top: 5px;
}
</style> -->
